require=function t(i,e,n){function h(s,l){if(!e[s]){if(!i[s]){var r="function"==typeof require&&require;if(!l&&r)return r(s,!0);if(o)return o(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var c=e[s]={exports:{}};i[s][0].call(c.exports,function(t){var e=i[s][1][t];return h(e?e:t)},c,c.exports,t,i,e,n)}return e[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)h(n[s]);return h}({fkMaskJS:[function(t,i,e){cc._RFpush(i,"37e71Rhw+pHcah89zUWC3jZ","fkMaskJS"),cc.Class({"extends":cc.Component,properties:{info:null,fk:null,llk:null,scoreAudio:{"default":null,url:cc.AudioClip}},onLoad:function(){this.node.on("touchend",function(){if(console.info(this.fk.width),this.llk._preCheck){var t=this.llk._preCheck.getChildByName("fkMask").getComponent("fkMaskJS").info;t.type===this.info.type&&this.llk._preCheck!==this.fk&&this.pathIsOk(t)?(this.llk._preCheck.destroy(),this.llk._preCheck=null,this.fk.destroy(),this.llk._map[t.loc.x][t.loc.y]=1,this.llk._map[this.info.loc.x][this.info.loc.y]=1):(this.llk._preCheck.getChildByName("fkMask").getComponent("cc.Sprite").setVisible(!1),this.llk._preCheck=null)}else this.fk.getChildByName("fkMask").getComponent("cc.Sprite").setVisible(!0),this.llk._preCheck=this.fk},this)},pathIsOk:function(t){var i=this.llk.findPath(t.loc,this.info.loc);return console.info(i),i.length>0?!0:!1},onDestroy:function(){this.llk._blockCount--,cc.audioEngine.playEffect(this.scoreAudio,!1),this.llk._blockCount||this.llk.upgrate()}}),cc._RFpop()},{}],llk:[function(t,i,e){cc._RFpush(i,"1ad6eZTdpxH+awFltRPNyuh","llk");var n=t("pathUtil");cc.Class({"extends":cc.Component,properties:{ground:{"default":null,type:cc.Node},fkMask:{"default":null,type:cc.Prefab},fk:{"default":[],type:[cc.Prefab]},missionLabel:{"default":null,type:cc.Label},xSize:10,ySize:10,xSizeFk:50,ySizeFk:50,_preCheck:null,_map:[],_blockCount:0,_missionNum:1},onLoad:function(){this.init()},findPath:function(t,i){return n.findPath([t.x,t.y],[i.x,i.y],this._map,1)},upgrate:function(){return this.xSize>this.ySize?this.ySize++:this.xSize++,this.xSize*this.ySize%2!==0?void this.upgrate():(this.init(),this._missionNum++,void(this.missionLabel.string="第"+this._missionNum+"关"))},init:function(){xMin=Math.round(-this.xSize/2),xMax=Math.round(this.xSize/2),yMin=Math.round(-this.ySize/2),yMax=Math.round(this.ySize/2);for(var t=yMin-1;t<xMax+1;t++){this._map[t]=[];for(var i=yMin-1;i<yMax+1;i++)this._map[t][i]=1}for(var e=[],n=0,h=this.xSize*this.ySize,o=0;o<this.fk.length;o++)e[o]=0;for(var t=xMin;t<xMax;t++)for(var i=yMin;i<yMax;i++){this._map[t][i]=0,this._blockCount++;var s=Math.floor(cc.random0To1()*this.fk.length);if(++n>h-this.fk.length)for(var l=0;l<this.fk.length;l++)if(e[l]/2%1!==0){s=l;break}e[s]=e[s]+1;var r=cc.instantiate(this.fk[s]);this.ground.addChild(r);var a=cc.instantiate(this.fkMask);r.addChild(a),r.width=this.xSizeFk,r.height=this.ySizeFk,r.x=t*this.xSizeFk,r.y=i*this.ySizeFk;var c={loc:{x:t,y:i},type:s};a.width=this.xSizeFk,a.height=this.ySizeFk,a.x=0,a.y=0,a.info=c;var f=a.getComponent("fkMaskJS");f.info=c,f.fk=r,f.llk=this,console.info(r.width)}}}),cc._RFpop()},{pathUtil:"pathUtil"}],pathUtil:[function(t,i,e){cc._RFpush(i,"80da7zUi9NBUoRvIyY5WrQL","pathUtil");var n=function(){this.x=0,this.y=0,this.G=0,this.H=0},h={findPath:function(t,i,e,h){var o=new n;o.x=t[0],o.y=t[1];var s=new n;s.x=i[0],s.y=i[1],console.info(t,i),console.info(e.toString()),console.info(h);for(var l=function f(t,i){var o=[],s=null;t.length>1&&(s=t[t.length-2]);for(var l=t[t.length-1],r=l.x-1;r<=l.x+1;r++)for(var a=l.y-1;a<=l.y+1;a++)if((r!=l.x||a!=l.y)&&(r===l.x||a===l.y)&&(e[r]&&e[r][a]&&e[r][a]==h||r===i.x&&a===i.y)){var c=i.x-r,u=i.y-a,k=new n;if(k.x=r,k.y=a,k.H=Math.abs(c)+Math.abs(u),k.G=l.G,null!=s&&2!==Math.abs(k.x-s.x)&&2!==Math.abs(k.y-s.y)&&(k.G=l.G+1),!(k.G>2)&&(o.push(k),k.x===i.x&&k.y===i.y))return t.push(k),t}if(0===o.length)return[];o.sort(function(t,i){return t.H+t.G-(i.H+t.G)});for(var p=[],y=null,r=0;r<o.length&&p.length<=1;r++)y=t.slice(0),y.push(o[r]),p=f(y,i);return p},r=l([o],s),a=0;a<r.length;a++)for(var c=a+1;c+1<r.length;c++)(r[a].x==r[c].x&&r[c].x==r[c+1].x||r[a].y==r[c].y&&r[c].y==r[c+1].y||Math.abs(r[a].x-r[c].x)==Math.abs(r[a].y-r[c].y)&&Math.abs(r[c].x-r[c+1].x)==Math.abs(r[c].y-r[c+1].y))&&(r.splice(a+1,1),c--);return r}};i.exports=h,cc._RFpop()},{}]},{},["llk","fkMaskJS","pathUtil"]);
//# sourceMappingURL=project.js.map